@admin_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NTk2MjcxNiwianRpIjoiZmYxM2NkNmItNWEyYy00MzUyLTg1YmEtM2Q0NzBlYjc0ZDllIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6IjEiLCJuYmYiOjE3NDU5NjI3MTYsImV4cCI6MTc0NTk2OTkxNn0.VUojih7VT7a3eAwgto9lTwee-joo13DFy_AhIIMMJII
@school_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NTk5MTUxNywianRpIjoiNDY2MDZiMDctNDNiMi00NjU5LTkxY2ItYzlmNjRkNDgxY2M5IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6IjIiLCJuYmYiOjE3NDU5OTE1MTcsImV4cCI6MTc0NTk5ODcxN30.hF5ihN_JxhLGtwuk6-OjRSptQdX-Y_0B509acvwSWgU
@device_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NTk2Mjc2MywianRpIjoiNjNkMDE5YzYtYjY3NS00NDI3LWI5MmItMjRmNDIyZmUyY2ZlIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6IjE6OTQ6NTQ6QzU6RTk6MUM6QjQiLCJuYmYiOjE3NDU5NjI3NjMsImV4cCI6MTc0ODU1NDc2M30.THhVJzAUuipA95zr-UvgHps-Ap53lXwVMypWGWgIRFo

//========================================
// X√ÅC TH·ª∞C NG∆Ø·ªúI D√ôNG
//========================================

### üîê Login admin ƒë·ªÉ l·∫•y token - API endpoint
POST http://127.0.0.1:5000/login
Content-Type: application/json
Accept: application/json

{
  "username": "admin",
  "password": "123"
}

### üîê Login school admin ƒë·ªÉ l·∫•y token
POST http://127.0.0.1:5000/login
Content-Type: application/json
Accept: application/json

{
  "username": "ad1", 
  "password": "123"
}

### üë§ Ki·ªÉm tra session hi·ªán t·∫°i
GET http://127.0.0.1:5000/check-session

### üë§ L·∫•y th√¥ng tin ng∆∞·ªùi d√πng hi·ªán t·∫°i
GET http://127.0.0.1:5000/user/me
Authorization: Bearer {{school_token}}

### üë§ Debug th√¥ng tin ng∆∞·ªùi d√πng (role ki·ªÉm tra)
GET http://127.0.0.1:5000/schedule/debug-user
Authorization: Bearer {{school_token}}

//========================================
// QU·∫¢N L√ù TR∆Ø·ªúNG H·ªåC
//========================================

### üè´ L·∫•y danh s√°ch t·∫•t c·∫£ tr∆∞·ªùng h·ªçc (admin)
GET http://127.0.0.1:5000/school/
Authorization: Bearer {{admin_token}}

//========================================
// QU·∫¢N L√ù THI·∫æT B·ªä
//========================================
### üì° ƒêƒÉng k√Ω thi·∫øt b·ªã ESP32 m·ªõi
POST http://127.0.0.1:5000/device/register
Content-Type: application/json

{
  "mac_address": "00:1A:2B:3C:4D:5A"
}

### üîë X√°c th·ª±c thi·∫øt b·ªã ESP32 v√† l·∫•y token
POST http://127.0.0.1:5000/device/authenticate
Content-Type: application/json

{
  "mac_address": "94:54:C5:E9:1C:B4"
}


### üìü ƒêƒÉng k√Ω thi·∫øt b·ªã (public API)
POST http://127.0.0.1:5000/device/register
Content-Type: application/json

{
  "mac_address": "00:1A:2B:3C:4D:5C",
  "school_id": 2
}

### üìü Ki·ªÉm tra x√°c th·ª±c thi·∫øt b·ªã (public API)
POST http://127.0.0.1:5000/device/authenticate
Content-Type: application/json

{
  "mac_address": "94:54:C5:E9:1C:B4"
}

### üìü T·∫°o thi·∫øt b·ªã m·ªõi (admin)
POST http://127.0.0.1:5000/device/create
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "name": "ESP32-KhuA",
  "ip_address": "",
  "mac_address": "them gi nhap mac",
  "school_id": 3,
  "active": true,
  "user_id": 3
}

### üìü L·∫•y th√¥ng tin chi ti·∫øt thi·∫øt b·ªã (admin)
GET http://127.0.0.1:5000/device/
Authorization: Bearer {{admin_token}}

### üìü Danh s√°ch thi·∫øt b·ªã (admin)
GET http://127.0.0.1:5000/device/list
Authorization: Bearer {{admin_token}}

### üìü Danh s√°ch thi·∫øt b·ªã ch∆∞a ƒë∆∞·ª£c g√°n (admin)
GET http://127.0.0.1:5000/device/unassigned
Authorization: Bearer {{admin_token}}

### üìü G√°n thi·∫øt b·ªã cho tr∆∞·ªùng v√† ng∆∞·ªùi d√πng (admin)
POST http://127.0.0.1:5000/device/assign
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "device_id": 1,
  "name": "ESP32-KhuA-Updated",
  "school_id": 1,
  "user_id": 2,
  "active": true
}

### üìü C·∫≠p nh·∫≠t th√¥ng tin thi·∫øt b·ªã (admin)
POST http://127.0.0.1:5000/device/update
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "device_id": 1,
  "name": "ESP32-KhuA-New",
  "active": true
}

### üì° Ki·ªÉm tra tr·∫°ng th√°i k·∫øt n·ªëi thi·∫øt b·ªã (heartbeat)
POST http://127.0.0.1:5000/device/heartbeat
Content-Type: application/json
Authorization: Bearer {{device_token}}

{
  "status": "online",
  "temperature": 30.5,
  "humidity": 65.2
}

### üîÑ Thi·∫øt l·∫≠p l·∫°i thi·∫øt b·ªã (reset)
POST http://127.0.0.1:5000/device/reset
Content-Type: application/json
Authorization: Bearer {{device_token}}

{
  "reason": "test_restart"
}

//========================================
// QU·∫¢N L√ù L·ªäCH CHU√îNG
//========================================

### üï∞Ô∏è Danh s√°ch l·ªãch chu√¥ng (school ho·∫∑c admin)
GET http://127.0.0.1:5000/schedule/
Authorization: Bearer {{admin_token}}

### üï∞Ô∏è L·∫•y l·ªãch chu√¥ng theo ID 
GET http://127.0.0.1:5000/schedule/2
Authorization: Bearer {{school_token}}

### üìã L·∫•y t·∫•t c·∫£ c√°c ƒëi·ªÉm th·ªùi gian trong l·ªãch c·ªßa m·ªôt tr∆∞·ªùng
GET http://127.0.0.1:5000/schedule?school_id=1
Authorization: Bearer {{admin_token}}

### üìÜ L·∫•y l·ªãch chu√¥ng h√¥m nay cho thi·∫øt b·ªã
GET http://127.0.0.1:5000/device/schedule/today
Authorization: Bearer {{device_token}}

### üìÜ L·∫•y l·ªãch chu√¥ng h√¥m nay
GET http://127.0.0.1:5000/schedule-helper/today
Authorization: Bearer {{school_token}}

### üìÜ L·∫•y l·ªãch chu√¥ng h√¥m nay (ƒë∆∞·ªùng d·∫´n thay th·∫ø)
GET http://127.0.0.1:5000/schedule-helper/schedule/today
Authorization: Bearer {{school_token}}

### ‚ûï T·∫°o l·ªãch chu√¥ng v√†o h·ªçc (school)
POST http://127.0.0.1:5000/schedule/
Content-Type: application/json
Authorization: Bearer {{school_token}}

{
  "day_of_week": 2,
  "time_point": "15:30",
  "bell_type": "V√†o h·ªçc",
  "is_summer": false
}

### ‚ûï T·∫°o l·ªãch chu√¥ng ƒëi·ªÉm ti·∫øt (school)
POST http://127.0.0.1:5000/schedule/
Content-Type: application/json
Authorization: Bearer {{school_token}}

{
  "day_of_week": 2,
  "time_point": "14:30",
  "bell_type": "ƒëi·ªÉm ti·∫øt",
  "is_summer": false
}

### ‚ûï T·∫°o l·ªãch chu√¥ng ra ch∆°i (school)
POST http://127.0.0.1:5000/schedule/
Content-Type: application/json
Authorization: Bearer {{school_token}}

{
  "day_of_week": 2,
  "time_point": "09:15",
  "bell_type": "ra ch∆°i",
  "is_summer": false
}

### ‚ûï T·∫°o l·ªãch chu√¥ng ra v·ªÅ (school)
POST http://127.0.0.1:5000/schedule/
Content-Type: application/json
Authorization: Bearer {{school_token}}

{
  "day_of_week": 2,
  "time_point": "11:30",
  "bell_type": "ra v·ªÅ",
  "is_summer": false
}

### ‚ûï T·∫°o l·ªãch chu√¥ng v√†o h·ªçc (admin)
POST http://127.0.0.1:5000/schedule/
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "day_of_week": 2,
  "time_point": "07:00",
  "bell_type": "v√†o h·ªçc",
  "is_summer": false,
  "school_id": 2
}

### üìù C·∫≠p nh·∫≠t l·ªãch chu√¥ng (school)
PUT http://127.0.0.1:5000/schedule/1
Content-Type: application/json
Authorization: Bearer {{school_token}}

{
  "day_of_week": 1,
  "time_point": "07:15",
  "bell_type": "v√†o h·ªçc",
  "is_summer": false
}

### üìù C·∫≠p nh·∫≠t l·ªãch chu√¥ng (admin)
PUT http://127.0.0.1:5000/schedule/1
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "day_of_week": 1,
  "time_point": "07:15",
  "bell_type": "v√†o h·ªçc",
  "is_summer": false,
  "school_id": 2
}

### ‚ùå Xo√° l·ªãch chu√¥ng (school)
DELETE http://127.0.0.1:5000/schedule/2
Authorization: Bearer {{school_token}}

### ‚ùå Xo√° l·ªãch chu√¥ng (admin)
DELETE http://127.0.0.1:5000/schedule/1
Authorization: Bearer {{admin_token}}

//========================================
// QU·∫¢N L√ù NG√ÄY NGH·ªà
//========================================

### üìÖ L·∫•y danh s√°ch ng√†y ngh·ªâ (m·∫∑c ƒë·ªãnh theo tr∆∞·ªùng c·ªßa user)
GET http://127.0.0.1:5000/holiday/
Authorization: Bearer {{school_token}}

### üìÖ L·∫•y danh s√°ch ng√†y ngh·ªâ theo tr∆∞·ªùng c·ª• th·ªÉ (admin)
GET http://127.0.0.1:5000/holiday/?school_id=1
Authorization: Bearer {{admin_token}}

### üìÖ L·∫•y t·∫•t c·∫£ ng√†y ngh·ªâ c·ªßa t·∫•t c·∫£ tr∆∞·ªùng (admin)
GET http://127.0.0.1:5000/holiday/all
Authorization: Bearer {{admin_token}}

### üìÖ L·∫•y chi ti·∫øt m·ªôt ng√†y ngh·ªâ
GET http://127.0.0.1:5000/holiday/1
Authorization: Bearer {{admin_token}}

### üìÖ Ki·ªÉm tra m·ªôt ng√†y c√≥ ph·∫£i l√† ng√†y ngh·ªâ kh√¥ng??
GET http://127.0.0.1:5000/holiday/check?date=2025-05-01
Authorization: Bearer {{school_token}}

### üïµÔ∏è‚Äç‚ôÇÔ∏è Ki·ªÉm tra h√¥m nay c√≥ ph·∫£i ng√†y ngh·ªâ kh√¥ng? (theo thi·∫øt b·ªã)
GET http://127.0.0.1:5000/schedule-helper/is_holiday?device_id=1
Authorization: Bearer {{school_token}}

### üìÖ T·∫°o ng√†y ngh·ªâ (admin)
POST http://127.0.0.1:5000/holiday/
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "name": "Ngh·ªâ l·ªÖ 30/4",
  "start_date": "2025-04-30",
  "end_date": "2025-05-05",
  "school_id": 1
}

### üìÖ T·∫°o ng√†y ngh·ªâ: T·∫øt Nguy√™n ƒê√°n (admin)
POST http://127.0.0.1:5000/holiday/
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "name": "T·∫øt Nguy√™n ƒê√°n",
  "start_date": "2025-01-23",
  "end_date": "2025-01-29",
  "school_id": 1
}

### üìÖ T·∫°o ng√†y ngh·ªâ: Gi·ªó T·ªï H√πng V∆∞∆°ng (admin)
POST http://127.0.0.1:5000/holiday/
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "name": "Gi·ªó T·ªï H√πng V∆∞∆°ng",
  "start_date": "2025-04-10",
  "end_date": "2025-04-10",
  "school_id": 1
}

### üìÖ C·∫≠p nh·∫≠t ng√†y ngh·ªâ (admin)
PUT http://127.0.0.1:5000/holiday/1
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "name": "Ngh·ªâ l·ªÖ 30/4 v√† 1/5",
  "start_date": "2025-04-30",
  "end_date": "2025-05-01"
}

### ‚ùå Xo√° ng√†y ngh·ªâ (admin)
DELETE http://127.0.0.1:5000/holiday/1
Authorization: Bearer {{admin_token}}

### üìÖ ƒê·ªìng b·ªô ng√†y ngh·ªâ v·ªõi l·ªãch qu·ªëc gia (admin)
GET http://127.0.0.1:5000/holiday/sync?year=2025
Authorization: Bearer {{admin_token}}

//========================================
// QU·∫¢N L√ù C·∫§U H√åNH M√ôA H√à
//========================================

### üõ†Ô∏è T·∫°o c·∫•u h√¨nh m√πa h√® (admin)
PUT http://127.0.0.1:5000/season/config
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "school_id": 2,
  "summer_start": "2025-06-01",
  "summer_end": "2025-09-30"
}

### üõ†Ô∏è C·∫≠p nh·∫≠t c·∫•u h√¨nh m√πa h√® (admin)
PUT http://127.0.0.1:5000/season/config
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "school_id": 2,
  "summer_start": "2025-06-01",
  "summer_end": "2025-08-30"
}

### üóëÔ∏è Xo√° c·∫•u h√¨nh m√πa h√® (admin)
DELETE http://127.0.0.1:5000/season/1
Authorization: Bearer {{admin_token}}

//========================================
// API TH·ªêNG K√ä H·ªÜ TH·ªêNG
//========================================

### üìä Th·ªëng k√™ h·ªá th·ªëng (admin)
GET http://127.0.0.1:5000/admin/stats
Authorization: Bearer {{admin_token}}